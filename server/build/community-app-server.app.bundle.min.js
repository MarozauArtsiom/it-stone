!function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=3)}([function(module,exports){module.exports=require("inversify")},function(module,exports){module.exports=require("inversify-express-utils")},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(__webpack_require__(13))},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(4);var inversify_express_utils_1=__webpack_require__(1),body_parser_1=__importDefault(__webpack_require__(5)),morgan_1=__importDefault(__webpack_require__(6)),cors_1=__importDefault(__webpack_require__(7)),express_1=__importDefault(__webpack_require__(8)),path_1=__importDefault(__webpack_require__(9)),socket_io_1=__importDefault(__webpack_require__(10));__webpack_require__(11);var services_registration_1=__webpack_require__(18),socket_1=__webpack_require__(20),server=new inversify_express_utils_1.InversifyExpressServer(services_registration_1.CONTAINER);server.setConfig(function(app){app.use(morgan_1.default("dev")),app.use(cors_1.default()),app.use(body_parser_1.default.urlencoded({extended:!0})),app.use(body_parser_1.default.json()),app.use(express_1.default.static(path_1.default.join(__dirname,"../../client/dist/client")))});var application=server.build(),port=process.env.PORT||3030,serverInstance=application.listen(port,function(){console.log("Press CTRL+C to stop\n")});socket_1.SocketService.getInstance().setSocket(socket_io_1.default(serverInstance))},function(module,exports){module.exports=require("reflect-metadata")},function(module,exports){module.exports=require("body-parser")},function(module,exports){module.exports=require("morgan")},function(module,exports){module.exports=require("cors")},function(module,exports){module.exports=require("express")},function(module,exports){module.exports=require("path")},function(module,exports){module.exports=require("socket.io")},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(__webpack_require__(12))},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__param=this&&this.__param||function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value)}).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})},__generator=this&&this.__generator||function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}};Object.defineProperty(exports,"__esModule",{value:!0});var inversify_express_utils_1=__webpack_require__(1),inversify_1=__webpack_require__(0),user_authentication_1=__webpack_require__(2),UserController=function(){function UserController(userAuthenticationRepository){this.userAuthenticationRepository=userAuthenticationRepository}return UserController.prototype.googleAuth=function(request,response){return __awaiter(this,void 0,void 0,function(){var _a,email,name,accessToken;return __generator(this,function(_b){_a=request.body,email=_a.email,name=_a.name,accessToken=_a.accessToken;try{return[2,this.userAuthenticationRepository.socialNetworksLogin(email,name,accessToken)]}catch(error){return[2,response.status(500).json(error)]}return[2]})})},__decorate([inversify_express_utils_1.httpPost("/google-auth"),__metadata("design:type",Function),__metadata("design:paramtypes",[Object,Object]),__metadata("design:returntype",Promise)],UserController.prototype,"googleAuth",null),UserController=__decorate([inversify_express_utils_1.controller("/api/users"),__param(0,inversify_1.inject(user_authentication_1.UserAuthenticationRepository)),__metadata("design:paramtypes",[user_authentication_1.UserAuthenticationRepository])],UserController)}();exports.UserController=UserController},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value)}).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})},__generator=this&&this.__generator||function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}};Object.defineProperty(exports,"__esModule",{value:!0});var inversify_1=__webpack_require__(0),mongoose_1=__webpack_require__(14),models_1=__webpack_require__(15),db_1=__webpack_require__(17),UserAuthenticationRepository=function(){function UserAuthenticationRepository(){this.mongoose=new mongoose_1.Mongoose,this.userModel=this.mongoose.model(db_1.USER_COLLECTION,new mongoose_1.Schema(models_1.USER_SCHEMA)),this.mongoose.connect(db_1.DB_URL)}return UserAuthenticationRepository.prototype.socialNetworksLogin=function(email,name,accessToken){return __awaiter(this,void 0,void 0,function(){var newUser;return __generator(this,function(_a){return newUser=new this.userModel({email:email,name:name,accessToken:accessToken}),[2,new Promise(function(resolve,reject){newUser.save(function(error,data){error?(reject(error),console.log(error)):(resolve(data),console.log("Save "+data._id+" booking fitness info success"))})})]})})},UserAuthenticationRepository=__decorate([inversify_1.injectable(),__metadata("design:paramtypes",[])],UserAuthenticationRepository)}();exports.UserAuthenticationRepository=UserAuthenticationRepository},function(module,exports){module.exports=require("mongoose")},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(__webpack_require__(16))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.USER_SCHEMA={email:{type:String,required:!0},name:{type:String,required:!0},accessToken:{type:String,required:!0}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DB_URL="mongodb://it-stone:g3QMmzLgTp1qGRXf2n89jVlc5iVxHGVeO9zTguvH8W90sdEeLB9BxEIe00F7XmDwEg1Z9DeXHe0SEEWmTSaabg%3D%3D@it-stone.documents.azure.com:10255/?ssl=true",exports.USER_COLLECTION="user"},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var inversify_1=__webpack_require__(0),inversify_inject_decorators_1=__importDefault(__webpack_require__(19)),user_authentication_1=__webpack_require__(2);exports.CONTAINER=new inversify_1.Container,exports.CONTAINER.bind(user_authentication_1.UserAuthenticationRepository).to(user_authentication_1.UserAuthenticationRepository),exports.inject=inversify_inject_decorators_1.default(exports.CONTAINER).lazyInject},function(module,exports){module.exports=require("inversify-inject-decorators")},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(__webpack_require__(21))},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value)}).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})},__generator=this&&this.__generator||function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}};Object.defineProperty(exports,"__esModule",{value:!0});var inversify_1=__webpack_require__(0),SocketService=function(){function SocketService(){if(this.clients=[],SocketService_1.instance)throw new Error("You try to destroy singleton")}var SocketService_1;return SocketService_1=SocketService,SocketService.getInstance=function(){return SocketService_1.instance||(SocketService_1.instance=new SocketService_1),SocketService_1.instance},SocketService.prototype.setSocket=function(socketIO){return __awaiter(this,void 0,void 0,function(){var _this=this;return __generator(this,function(_a){return socketIO.on("connection",function(client){_this.clients.push(client),client.on("disconnect",function(){return _this.onDisconnect(client)}),client.on("onStep",function(){return _this.notifyAllClients()})}),[2]})})},SocketService.prototype.notifyAllClients=function(){this.clients.forEach(function(client){})},SocketService.prototype.onDisconnect=function(client){this.clients.splice(this.clients.indexOf(client),1)},SocketService=SocketService_1=__decorate([inversify_1.injectable(),__metadata("design:paramtypes",[])],SocketService)}();exports.SocketService=SocketService}]);
//# sourceMappingURL=community-app-server.app.bundle.min.js.map