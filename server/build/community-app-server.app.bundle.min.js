!function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=11)}([function(module,exports){module.exports=require("inversify")},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(__webpack_require__(25))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(__webpack_require__(21))},function(module,exports){module.exports=require("mongoose")},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(__webpack_require__(22)),__export(__webpack_require__(23)),__export(__webpack_require__(24))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DB_URL="mongodb://it-stone:g3QMmzLgTp1qGRXf2n89jVlc5iVxHGVeO9zTguvH8W90sdEeLB9BxEIe00F7XmDwEg1Z9DeXHe0SEEWmTSaabg%3D%3D@it-stone.documents.azure.com:10255/?ssl=true",exports.USER_COLLECTION="user",exports.CARD_COLLECTION="card",exports.DECK_COLLECTION="deck"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(__webpack_require__(29))},function(module,exports){module.exports=require("inversify-express-utils")},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var inversify_1=__webpack_require__(0),inversify_inject_decorators_1=__importDefault(__webpack_require__(27)),user_authentication_1=__webpack_require__(2),card_1=__webpack_require__(1),desk_1=__webpack_require__(9),linkedinInfoParser_1=__webpack_require__(6),parser_1=__webpack_require__(10);exports.CONTAINER=new inversify_1.Container,exports.CONTAINER.bind(user_authentication_1.UserAuthenticationRepository).to(user_authentication_1.UserAuthenticationRepository),exports.CONTAINER.bind(card_1.CardRepository).to(card_1.CardRepository),exports.CONTAINER.bind(desk_1.DeskRepository).to(desk_1.DeskRepository),exports.CONTAINER.bind(linkedinInfoParser_1.LinkedinInfoParserService).to(linkedinInfoParser_1.LinkedinInfoParserService),exports.CONTAINER.bind(parser_1.ParserService).to(parser_1.ParserService),exports.inject=inversify_inject_decorators_1.default(exports.CONTAINER).lazyInject},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(__webpack_require__(28))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(__webpack_require__(30))},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(12);var inversify_express_utils_1=__webpack_require__(7),body_parser_1=__importDefault(__webpack_require__(13)),morgan_1=__importDefault(__webpack_require__(14)),cors_1=__importDefault(__webpack_require__(15)),express_1=__importDefault(__webpack_require__(16)),path_1=__importDefault(__webpack_require__(17)),socket_io_1=__importDefault(__webpack_require__(18));__webpack_require__(19);var services_registration_1=__webpack_require__(8),socket_1=__webpack_require__(33),server=new inversify_express_utils_1.InversifyExpressServer(services_registration_1.CONTAINER);server.setConfig(function(app){app.use(morgan_1.default("dev")),app.use(cors_1.default()),app.use(body_parser_1.default.urlencoded({extended:!0})),app.use(body_parser_1.default.json()),app.use(express_1.default.static(path_1.default.join(__dirname,"../../client/dist/client")))});var application=server.build(),port=process.env.PORT||3030,serverInstance=application.listen(port,function(){console.log("Press CTRL+C to stop\n")});socket_1.SocketService.getInstance().setSocket(socket_io_1.default(serverInstance))},function(module,exports){module.exports=require("reflect-metadata")},function(module,exports){module.exports=require("body-parser")},function(module,exports){module.exports=require("morgan")},function(module,exports){module.exports=require("cors")},function(module,exports){module.exports=require("express")},function(module,exports){module.exports=require("path")},function(module,exports){module.exports=require("socket.io")},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(__webpack_require__(20))},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__param=this&&this.__param||function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value)}).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})},__generator=this&&this.__generator||function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}};Object.defineProperty(exports,"__esModule",{value:!0});var inversify_express_utils_1=__webpack_require__(7),inversify_1=__webpack_require__(0),user_authentication_1=__webpack_require__(2),card_1=__webpack_require__(1),service_1=__webpack_require__(26),linkedinInfoParser_1=__webpack_require__(6),data={name:"Nikita Bazhkou",currentPosition:".Net Software Engineer - EPAM Systems",skills:["C#","JavaScript","SQL","Microsoft SQL Server","Cascading Style Sheets (CSS)","ASP.NET Core","ASP.NET MVC 5","Entity Framework","LINQ","ADO.NET","jQuery","React.js","Angular","git","AJAX","JIRA","Solr","EPiServer CMS","EPiServer Commerce"],education:5,image:"https://media.licdn.com/dms/image/C4E03AQHQPp3axkhdSA/profile-displayphoto-shrink_800_800/0?e=1545264000&v=beta&t=NkQL-yaMMRa4WzI22Ks9xrmeTLekzYAjYnhGWD1Nc1Y",connections:50},UserController=function(){function UserController(userAuthenticationRepository,cardRepository,deskRepository,linkedinInfoParserService,parserService){this.userAuthenticationRepository=userAuthenticationRepository,this.cardRepository=cardRepository,this.deskRepository=deskRepository,this.linkedinInfoParserService=linkedinInfoParserService,this.parserService=parserService}return UserController.prototype.googleAuth=function(request,response){return __awaiter(this,void 0,void 0,function(){var _a,email,name,accessToken;return __generator(this,function(_b){_a=request.body,email=_a.email,name=_a.name,accessToken=_a.accessToken;try{return[2,this.userAuthenticationRepository.socialNetworksLogin(email,name,accessToken)]}catch(error){return[2,response.status(500).json(error)]}return[2]})})},UserController.prototype.saveCard=function(request,response){return __awaiter(this,void 0,void 0,function(){var _a,name,currentPosition,education,skills,image;return __generator(this,function(_b){_a=request.body,name=_a.name,currentPosition=_a.currentPosition,education=_a.education,skills=_a.skills,image=_a.image;try{return[2,this.cardRepository.saveCard(name,currentPosition,education,skills,image)]}catch(error){return[2,response.status(500).json(error)]}return[2]})})},UserController.prototype.getCards=function(request,response){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){try{return[2,this.cardRepository.getCards()]}catch(error){return[2,response.status(500).json(error)]}return[2]})})},UserController.prototype.updateImage=function(request,response){return __awaiter(this,void 0,void 0,function(){var userEmail,cardIds;return __generator(this,function(_a){userEmail=request.body.email,cardIds=request.body.cardIds;try{return[2,this.deskRepository.updateCard(userEmail,cardIds)]}catch(error){return[2,response.status(500).json(error)]}return[2]})})},UserController.prototype.getDeckCards=function(request,response){return __awaiter(this,void 0,void 0,function(){var userEmail;return __generator(this,function(_a){userEmail=request.params.userEmail;try{return[2,this.deskRepository.getDeckCards(userEmail)]}catch(error){return[2,response.status(500).json(error)]}return[2]})})},UserController.prototype.TestParser=function(request,response){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){request.params.userEmail;try{return[2,this.linkedinInfoParserService.parseProfileData(data)]}catch(error){return[2,response.status(500).json(error)]}return[2]})})},UserController.prototype.parseUser=function(request,response){return __awaiter(this,void 0,void 0,function(){var name,error_1;return __generator(this,function(_a){switch(_a.label){case 0:name=request.body.name,console.log(name,"name parse"),_a.label=1;case 1:return _a.trys.push([1,3,,4]),[4,this.parserService.parseUser(name)];case 2:return[2,_a.sent()];case 3:return error_1=_a.sent(),[2,response.status(500).json(error_1)];case 4:return[2]}})})},__decorate([inversify_express_utils_1.httpPost("/google-auth"),__metadata("design:type",Function),__metadata("design:paramtypes",[Object,Object]),__metadata("design:returntype",Promise)],UserController.prototype,"googleAuth",null),__decorate([inversify_express_utils_1.httpPost("/save-card"),__metadata("design:type",Function),__metadata("design:paramtypes",[Object,Object]),__metadata("design:returntype",Promise)],UserController.prototype,"saveCard",null),__decorate([inversify_express_utils_1.httpGet("/get-cards"),__metadata("design:type",Function),__metadata("design:paramtypes",[Object,Object]),__metadata("design:returntype",Promise)],UserController.prototype,"getCards",null),__decorate([inversify_express_utils_1.httpPut("/update-deck"),__metadata("design:type",Function),__metadata("design:paramtypes",[Object,Object]),__metadata("design:returntype",Promise)],UserController.prototype,"updateImage",null),__decorate([inversify_express_utils_1.httpGet("/get-deck-cards/:userEmail"),__metadata("design:type",Function),__metadata("design:paramtypes",[Object,Object]),__metadata("design:returntype",Promise)],UserController.prototype,"getDeckCards",null),__decorate([inversify_express_utils_1.httpGet("/test-parser"),__metadata("design:type",Function),__metadata("design:paramtypes",[Object,Object]),__metadata("design:returntype",Promise)],UserController.prototype,"TestParser",null),__decorate([inversify_express_utils_1.httpPost("/parseUser"),__metadata("design:type",Function),__metadata("design:paramtypes",[Object,Object]),__metadata("design:returntype",Promise)],UserController.prototype,"parseUser",null),UserController=__decorate([inversify_express_utils_1.controller("/api/users"),__param(0,inversify_1.inject(user_authentication_1.UserAuthenticationRepository)),__param(1,inversify_1.inject(card_1.CardRepository)),__param(2,inversify_1.inject(service_1.DeskRepository)),__param(3,inversify_1.inject(linkedinInfoParser_1.LinkedinInfoParserService)),__param(4,inversify_1.inject(service_1.ParserService)),__metadata("design:paramtypes",[user_authentication_1.UserAuthenticationRepository,card_1.CardRepository,service_1.DeskRepository,linkedinInfoParser_1.LinkedinInfoParserService,service_1.ParserService])],UserController)}();exports.UserController=UserController},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value)}).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})},__generator=this&&this.__generator||function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}};Object.defineProperty(exports,"__esModule",{value:!0});var inversify_1=__webpack_require__(0),mongoose_1=__webpack_require__(3),models_1=__webpack_require__(4),db_1=__webpack_require__(5),UserAuthenticationRepository=function(){function UserAuthenticationRepository(){this.mongoose=new mongoose_1.Mongoose,this.userModel=this.mongoose.model(db_1.USER_COLLECTION,new mongoose_1.Schema(models_1.USER_SCHEMA)),this.mongoose.connect(db_1.DB_URL)}return UserAuthenticationRepository.prototype.socialNetworksLogin=function(email,name,accessToken){return __awaiter(this,void 0,void 0,function(){var newUser;return __generator(this,function(_a){return newUser=new this.userModel({email:email,name:name,accessToken:accessToken}),[2,new Promise(function(resolve,reject){newUser.save(function(error,data){error?(reject(error),console.log(error)):(resolve(data),console.log("Save "+data._id+" user success"))})})]})})},UserAuthenticationRepository=__decorate([inversify_1.injectable(),__metadata("design:paramtypes",[])],UserAuthenticationRepository)}();exports.UserAuthenticationRepository=UserAuthenticationRepository},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.USER_SCHEMA={email:{type:String,required:!0},name:{type:String,required:!0},accessToken:{type:String,required:!0}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CARD_SCHEMA={name:{type:String,required:!0},currentPosition:{type:String,required:!0},image:{type:String,required:!0},education:{type:Number,required:!0},skills:{type:[String]}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DECK_SCHEMA={userEmail:{type:String,required:!0},cardIds:{type:[String]}}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value)}).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})},__generator=this&&this.__generator||function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}};Object.defineProperty(exports,"__esModule",{value:!0});var inversify_1=__webpack_require__(0),mongoose_1=__webpack_require__(3),models_1=__webpack_require__(4),db_1=__webpack_require__(5),CardRepository=function(){function CardRepository(){this.mongoose=new mongoose_1.Mongoose,this.cardModel=this.mongoose.model(db_1.CARD_COLLECTION,new mongoose_1.Schema(models_1.CARD_SCHEMA)),this.mongoose.connect(db_1.DB_URL)}return CardRepository.prototype.saveCard=function(name,currentPosition,education,skills,image){return __awaiter(this,void 0,void 0,function(){var newCard;return __generator(this,function(_a){return newCard=new this.cardModel({name:name,currentPosition:currentPosition,education:education,skills:skills,image:image}),[2,new Promise(function(resolve,reject){newCard.save(function(error,data){error?(reject(error),console.log(error)):(resolve(data),console.log("Save "+data._id+" card success"))})})]})})},CardRepository.prototype.getCards=function(){return __awaiter(this,void 0,void 0,function(){var _this=this;return __generator(this,function(_a){return[2,new Promise(function(resolve,reject){_this.cardModel.find({},function(error,data){error?reject(error):(resolve(data),console.log("Get all cards"))})})]})})},CardRepository=__decorate([inversify_1.injectable(),__metadata("design:paramtypes",[])],CardRepository)}();exports.CardRepository=CardRepository},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(__webpack_require__(2)),__export(__webpack_require__(8)),__export(__webpack_require__(1)),__export(__webpack_require__(9)),__export(__webpack_require__(10))},function(module,exports){module.exports=require("inversify-inject-decorators")},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__param=this&&this.__param||function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value)}).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})},__generator=this&&this.__generator||function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}};Object.defineProperty(exports,"__esModule",{value:!0});var inversify_1=__webpack_require__(0),mongoose_1=__webpack_require__(3),models_1=__webpack_require__(4),db_1=__webpack_require__(5),card_1=__webpack_require__(1),DeskRepository=function(){function DeskRepository(cardRepository){this.cardRepository=cardRepository,this.mongoose=new mongoose_1.Mongoose,this.deckModel=this.mongoose.model(db_1.DECK_COLLECTION,new mongoose_1.Schema(models_1.DECK_SCHEMA)),this.mongoose.connect(db_1.DB_URL)}return DeskRepository.prototype.createDeck=function(userEmail,cardIds){return __awaiter(this,void 0,void 0,function(){var newDeck;return __generator(this,function(_a){return newDeck=new this.deckModel({userEmail:userEmail,cardIds:cardIds}),[2,new Promise(function(resolve,reject){newDeck.save(function(error,data){error?(reject(error),console.log(error)):(resolve(data),console.log("Save "+data._id+" deck success"))})})]})})},DeskRepository.prototype.updateCard=function(userEmail,cardIds){return __awaiter(this,void 0,void 0,function(){var _this=this;return __generator(this,function(_a){return[2,new Promise(function(resolve,reject){_this.deckModel.findOneAndUpdate({userEmail:userEmail},cardIds,function(error,data){return __awaiter(_this,void 0,void 0,function(){var newDate;return __generator(this,function(_a){switch(_a.label){case 0:return error?(reject(error),[3,4]):[3,1];case 1:return data?[3,3]:[4,this.createDeck(userEmail,cardIds)];case 2:return newDate=_a.sent(),resolve(newDate),[3,4];case 3:resolve(data),console.log("Update "+data.userEmail+" image success"),_a.label=4;case 4:return[2]}})})})})]})})},DeskRepository.prototype.getDeckCards=function(userEmail){return __awaiter(this,void 0,void 0,function(){var _this=this;return __generator(this,function(_a){return[2,new Promise(function(resolve,reject){_this.deckModel.findOne({userEmail:userEmail},function(error,data){return __awaiter(_this,void 0,void 0,function(){var cards,deckCards;return __generator(this,function(_a){switch(_a.label){case 0:return error?(reject(error),[3,3]):[3,1];case 1:return[4,this.cardRepository.getCards()];case 2:cards=_a.sent(),deckCards=cards.filter(function(card){return-1!==data.cardIds.findIndex(function(cardId){return cardId===card._id})}),resolve(deckCards),console.log("Get deck cards"),_a.label=3;case 3:return[2]}})})})})]})})},DeskRepository=__decorate([inversify_1.injectable(),__param(0,inversify_1.inject(card_1.CardRepository)),__metadata("design:paramtypes",[card_1.CardRepository])],DeskRepository)}();exports.DeskRepository=DeskRepository},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:!0});var ignoreSkillsJson={HTML:"XML",CSS:["Sass","Less"],JavaScript:["TypeScript"],React:["Angular","AngularJS","Vue.js"],"D3.js":6,Webpack:["Grunt","Gulp"],SQL:["NOSQL"],"C#":["Java"],"ASP.NET":4,Java:[".Net","C#"],Android:1,".NET":"Java",arduino:9,Arduino:["C"],"C++":"",C:"Rust",Rust:"C"},skillsValues={HTML:1,CSS:2,JavaScript:7,React:6,"D3.js":6,Webpack:3,SQL:4,"C#":1,"ASP.NET":4,Java:0,Android:1,".NET":4,arduino:9,Arduino:10,"C++":10,C:10},inversify_1=__webpack_require__(0),LinkedinInfoParserService=function(){function LinkedinInfoParserService(){}return LinkedinInfoParserService.prototype.parseProfileData=function(data){var profile,education,connections,coreSkills,superSkill,skills=data.skills;return{name:data.name,image:data.image,hp:(data.education+data.skills.length)*(coreSkills=skills.slice(0,3),superSkill=[".Net","JavaScript","TypeScript","C#"],coreSkills.map(function(skill){return-1!==superSkill.indexOf(skill)?1.5:1}).reduce(function(acc,cur){return acc*cur},1)),superSkill:(profile=data,education=profile.education||0,connections=profile.connections||0,function(coreSkills){return-1!==coreSkills.indexOf("Java")?function(education){return function(connection){return education<=2?"easyJava":connection<=50?"mediumJava":"hardJava"}}:-1!==coreSkills.indexOf(".Net")||-1!==coreSkills.indexOf("C#")?function(education){return function(connection){return education<=2?"easy.Net":connection<=50?"medium.Net":"hard.Net"}}:function(education){return function(connections){return"Base"}}}(profile.skills.slice(0,3))(education)(connections)),createAttack:function(skills){return skills.map(function(skill){return skillsValues[skill]?{skill:skill,value:skillsValues[skill]}:{skill:skill,value:2}}).reduce(function(resultObj,current){return resultObj[current.skill]=current.value,resultObj},{})}(data.skills),ignore:function(skills){return skills.map(function(skill){return ignoreSkillsJson[skill]?ignoreSkillsJson[skill]:[]}).reduce(function(result,current){return result.concat(current)},[])}(skills)}},LinkedinInfoParserService=__decorate([inversify_1.injectable()],LinkedinInfoParserService)}();exports.LinkedinInfoParserService=LinkedinInfoParserService},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__param=this&&this.__param||function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value)}).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})},__generator=this&&this.__generator||function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result};Object.defineProperty(exports,"__esModule",{value:!0});var inversify_1=__webpack_require__(0),child_process_1=__webpack_require__(31),fs=__importStar(__webpack_require__(32)),linkedinInfoParser_1=__webpack_require__(6),ParserService=function(){function ParserService(linkedinInfoParserService){this.linkedinInfoParserService=linkedinInfoParserService}return ParserService.prototype.parseUser=function(name){var _this=this;return new Promise(function(resolve,reject){var args=['run test -- --params.login.email=wot220697@gmail.com --params.login.password=Kin11001 --params.search.username="'+name+'"'];console.log(__dirname,"__dirname before spawn"),child_process_1.spawn("npm",args,{stdio:"inherit",shell:!0,cwd:"../linkedInParser"}).on("close",function(){return __awaiter(_this,void 0,void 0,function(){var path,json,parsedData;return __generator(this,function(_a){switch(_a.label){case 0:return path="../linkedInParser/"+name+".json",console.log(__dirname,"__dirname on close"),[4,fs.pathExists(path)];case 1:return _a.sent()||reject(),[4,fs.readJson(path)];case 2:return json=_a.sent(),console.log("JSON DATA",json),parsedData=this.linkedinInfoParserService.parseProfileData(json),resolve(parsedData),[2]}})})})})},ParserService=__decorate([inversify_1.injectable(),__param(0,inversify_1.inject(linkedinInfoParser_1.LinkedinInfoParserService)),__metadata("design:paramtypes",[linkedinInfoParser_1.LinkedinInfoParserService])],ParserService)}();exports.ParserService=ParserService},function(module,exports){module.exports=require("child_process")},function(module,exports){module.exports=require("fs-extra")},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(__webpack_require__(34))},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value)}).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})},__generator=this&&this.__generator||function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}};Object.defineProperty(exports,"__esModule",{value:!0});var inversify_1=__webpack_require__(0),SocketService=function(){function SocketService(){if(this.clients=[],SocketService_1.instance)throw new Error("You try to destroy singleton")}var SocketService_1;return SocketService_1=SocketService,SocketService.getInstance=function(){return SocketService_1.instance||(SocketService_1.instance=new SocketService_1),SocketService_1.instance},SocketService.prototype.setSocket=function(socketIO){return __awaiter(this,void 0,void 0,function(){var _this=this;return __generator(this,function(_a){return socketIO.on("connection",function(client){_this.clients.push(client),2===_this.clients.length&&client.emit("onReady"),client.on("disconnect",function(){return _this.onDisconnect(client)}),client.on("onStep",function(data){return _this.notifyOtherUser(client,data)})}),[2]})})},SocketService.prototype.notifyOtherUser=function(client,data){},SocketService.prototype.onDisconnect=function(client){this.clients.splice(this.clients.indexOf(client),1)},SocketService.prototype.swapStepData=function(data){var newData=[];return data.forEach(function(gameStepData){if(1===gameStepData.id){var newGameStepData={id:4,cards:gameStepData.cards};newData.push(newGameStepData)}if(4===gameStepData.id){newGameStepData={id:1,cards:gameStepData.cards};newData.push(newGameStepData)}if(2===gameStepData.id){newGameStepData={id:3,cards:gameStepData.cards};newData.push(newGameStepData)}if(3===gameStepData.id){newGameStepData={id:2,cards:gameStepData.cards};newData.push(newGameStepData)}}),newData},SocketService=SocketService_1=__decorate([inversify_1.injectable(),__metadata("design:paramtypes",[])],SocketService)}();exports.SocketService=SocketService}]);
//# sourceMappingURL=community-app-server.app.bundle.min.js.map